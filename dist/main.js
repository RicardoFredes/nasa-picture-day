document.addEventListener("DOMContentLoaded",(()=>{const e=864e5,t=6048e5,n=document.getElementById("brand"),o=document.getElementById("next-button"),a=document.getElementById("previous-button"),s=document.getElementById("modal");let c=0;const d=(n=0)=>{const o=6e4*((new Date).getTimezoneOffset()+3),a=(new Date).getTime()-o-n*t;return`&start_date=${r(a-t+e)}&end_date=${r(a)}`},r=e=>new Date(e).toISOString().replace(/T.*/,""),i=(e,t)=>{if(!t)return null;const n=document.getElementById(e),{media_type:o,url:a,error:s}=t||{},c="image"===o?l(a):m(a);c.onload=()=>n.classList.remove("hide"),n.append(c),s||(n.onclick=()=>p(t,c.outerHTML))},l=e=>{const t=document.createElement("img");return t.src=e,t},m=e=>{const t=document.createElement("embed");return t.src=e+"?autoplay=0&mute=1&controls=1&showinfo=0&rel=0&autohide=1",t},u=()=>{s.classList.add("hide"),s.innerHTML=""},p=(e,t)=>{const n=`\n        <div class="content">\n            <a onclick="history.back()">[X] CLOSE</a>\n            <h1>${e.title}</h1>\n            <small>${e.date}</small>\n            <p>${e.explanation}</p>\n        </div>\n        <a href="${e.hdurl}" title="Open large size image" target="_blank" class="media">${t}</a>\n        `;s.innerHTML=n,s.classList.remove("hide"),g()},y=async()=>(async()=>{const e="https://api.nasa.gov/planetary/apod?api_key=Owy40anZTbWVb0Hbe3fYEkv6OqG2qdLYyQc9y7Th"+d(c);return fetch(e).then((e=>e.ok?e.json():[]))})().then((e=>{const t=e.length;for(let n=0;n<t;n++)i("day"+(t-n),e[n])})),h=(e=1)=>{if(e>7)return;const t=document.getElementById("day"+e);t.classList.add("hide"),t.innerHTML="",h(e+1)};a.onclick=()=>b(c+1),o.onclick=()=>b(c-1),n.onclick=()=>c&&b(0);const g=()=>{const e={page:c},t=c?"?page="+c:"?";history.pushState(e,null,t)};window.onpopstate=()=>{const e=L();e!==c?b(e,{notUpdateHistory:!0}):u()};const L=()=>{const e=location.search.replace(/.*page=(\d)/,"$1");return Number(e)||0},b=(e,t={})=>{"number"==typeof e&&(c=e),u(),h(),y(),0===c?o.classList.add("hide"):o.classList.remove("hide"),t.notUpdateHistory||g()};b(L(),{notUpdateHistory:!0})}));
